<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  
  <head>
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/script.js"></script>
    <title>Create new session</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
    <link rel="stylesheet" href="themes/spacelab/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap-responsive.css">
    <script type="text/javascript">
      $(function() {
        $.ajax({
          type: "GET",
          url: "http://"+window.location.host+"/api/sessions/en",
          success: function(response){
            $.each(response.session, function(index, session) {
               $('#tbodyEN').append('<tr id="'+session.id+'"><td>' + session.id + '</td><td>' + session.title + '</td><td>' + session.speaker + '</td><td>' + session.hall + '</td><td>' + session.day + '</td><td>' + session.startHour + '</td><td>' + session.endHour + '</td><td style="display:none">' + session.description +'</td><td><button id="btnShowUpdateModal"  data-id="'+session.id+'" class="btn btn-mini btn-warning" ><i class="icon-pencil"></i></button> <button class="btn btn-mini btn-danger"><i class="icon-remove"></i></button></td></tr>');
            });
          }
        });
        $.ajax({
          type: "GET",
          url: "http://"+window.location.host+"/api/sessions/tr",
          success: function(response){
            $.each(response.session, function(index, session) {
               $('#tbodyTR').append('<tr id="'+session.id+'"><td>' + session.id + '</td><td>' + session.title + '</td><td>' + session.speaker + '</td><td>' + session.hall + '</td><td>' + session.day + '</td><td>' + session.startHour + '</td><td>' + session.endHour + '</td><td style="display:none">' + session.description +'</td><td><button id="btnShowUpdateModal"  data-id="'+session.id+'" class="btn btn-mini btn-warning" ><i class="icon-pencil"></i></button> <button id="btn" class="btn btn-mini btn-danger"><i class="icon-remove"></i></button></td></tr>');
            });
            $('#tbodyTR').hide();
          }
        });
      });

      $(document).ready(function() {
        var clickedID;
        
        $('#btnShowTrTable').click(function(){
          $('#tbodyEN').hide();
          $('#tbodyTR').show();
          });
        $('#btnShowEnTable').click(function(){
          $('#tbodyEN').show();
          $('#tbodyTR').hide();
          });
        
        $(document).on("click", "#btnShowDeleteModal", function(){
          $('#deleteModal').modal('show');
          });
        
        $(document).on("click", "#btnShowUpdateModal", function () {
          var id = $(this).data("id");
          clickedID = $(this).data("id");
          
          $("#title").val($('#'+id+'>td').eq(1).html());
          
          var speaker = $('#'+id+'>td').eq(2).html();          
          $("#speaker option").each(function() { 
            this.selected = (this.text == speaker); 
            });
          
          var hall = $('#'+id+'>td').eq(3).html();
          $("#hall option").each(function(){
            this.selected = (this.text == hall);
            });
          
          var day = $('#'+id+'>td').eq(4).html();
          $("#day option").each(function(){
            this.selected = (this.text == day);
            });
          
          var startHour = $('#'+id+'>td').eq(5).html();
          $("#start_hour option").each(function(){
            this.selected = (this.text == startHour);
            });
          
          var endHour = $('#'+id+'>td').eq(6).html();
          $("#end_hour option").each(function(){
            this.selected = (this.text == endHour);
            });
          
          $('#description').val($('#' + id + '>td').eq(7).html());
          
          $('#updateModal').modal('show');
        });
        
        $(document).on("click", "#btnUpdateSession", function(){
          updateSession(clickedID, $('#title').val(), $('#speaker').val(), $('#day').val(), $('#hall').val(), $('#start_hour').val(), $('#end_hour').val(), $('#description').val());
          $("updateModal").modal("dismiss");
          });
      });
    </script>
  </head>
<body>
   <div class="container-fluid">
      <div class="navbar navbar-top">
        <div class="navbar-inner">
          <div class="container">
            <div class="pull-left">
              <ul class="nav pull-left">
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Session<b class="caret"></b></a>
                  <ul class="dropdown-menu">
                    <li>
                      <a href="/webcontent/create_session.html">Create</a> 
                    </li>
                    <li class="divider"></li>
                  </ul>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="container"><span class="divider"> </span></div>
    <div class="container">
      <span class="divider"> </span>
      <div class="row">
        <div class="span12">
          <div class="well">
            <div class="btn-toolbar">
              <button class="btn" id="btnShowEnTable">EN</button>
              <button class="btn" id="btnShowTrTable">TR</button>
            </div>
            <div class="well">
                <table class="table">
                  <thead>
                    <tr>
                      <th>ID</th>
                      <th>Title</th>
                      <th>Speaker</th>
                      <th>Hall</th>
                      <th>Day</th>
                      <th>Start Hour</th>
                      <th>End Hour</th>
                    </tr>
                  </thead>
                  <tbody id="tbodyEN">
                  </tbody>
                  <tbody id="tbodyTR">
                  </tbody>
                </table>
            </div>
            <div class="modal large hide fade" id="updateModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h3 id="myModalLabel">Update</h3>
                </div>
                <div class="modal-body">
                      <div id="updateForm">
                      <input class="span4" type="text" name="title" id="title" value="">
                      <select class="span4" name="speaker" id="speaker">
                        <option>Speaker_0</option>
                        <option>Speaker_1</option>
                        <option>Speaker_2</option>
                        <option>Speaker_3</option>
                        <option>Speaker_4</option>
                        <option>Speaker_5</option>
                        <option>Speaker_6</option>
                        <option>Speaker_7</option>
                        <option>Speaker_8</option>
                        <option>Speaker_9</option>
                        <option>Speaker_10</option>
                      </select>
                      <select class="span4" name="day" id="day">
                        <option>14 Haziran 2013 Cuma</option>
                        <option>15 Haziran 2013 Cumartesi</option>
                        <option>14 June 2013 Friday</option>
                        <option>15 June 2013 Saturday</option>
                      </select>
                      <select class="span4" name="hall" id="hall">
                        <option>A</option>
                        <option>B</option>
                      </select>
                      <div class="control-group">
                        <label class="control-label">Start Hour - End Hour</label>
                        <div class="controls">
                          <select class="span2" name="start_hour" id="start_hour">
                            <option>09:00</option>
                            <option>09:15</option>
                            <option>09:30</option>
                            <option>09:45</option>
                            <option>10:00</option>
                            <option>10:15</option>
                            <option>10:30</option>
                            <option>10:45</option>
                            <option>11:00</option>
                            <option>11:15</option>
                            <option>11:30</option>
                            <option>11:45</option>
                            <option>12:00</option>
                            <option>12:15</option>
                            <option>12:30</option>
                            <option>12:45</option>
                            <option>13:00</option>
                            <option>13:15</option>
                            <option>13:30</option>
                            <option>13:45</option>
                            <option>14:00</option>
                            <option>14:15</option>
                            <option>14:30</option>
                            <option>14:45</option>
                            <option>15:00</option>
                            <option>15:15</option>
                            <option>15:30</option>
                            <option>15:45</option>
                            <option>16:00</option>
                            <option>16:15</option>
                            <option>16:30</option>
                            <option>16:45</option>
                            <option>17:00</option>
                            <option>17:15</option>
                            <option>17:30</option>
                            <option>17:45</option>
                            <option>18:00</option>
                            <option>18:15</option>
                            <option>18:30</option>
                            <option>18:45</option>
                            <option>19:00</option>
                            <option>19:15</option>
                            <option>19:30</option>
                            <option>19:45</option>
                            <option>20:00</option>
                          </select>
                          <select class="span2" name="end_hour" id="end_hour">
                            <option>09:00</option>
                            <option>09:15</option>
                            <option>09:30</option>
                            <option>09:45</option>
                            <option>10:00</option>
                            <option>10:15</option>
                            <option>10:30</option>
                            <option>10:45</option>
                            <option>11:00</option>
                            <option>11:15</option>
                            <option>11:30</option>
                            <option>11:45</option>
                            <option>12:00</option>
                            <option>12:15</option>
                            <option>12:30</option>
                            <option>12:45</option>
                            <option>13:00</option>
                            <option>13:15</option>
                            <option>13:30</option>
                            <option>13:45</option>
                            <option>14:00</option>
                            <option>14:15</option>
                            <option>14:30</option>
                            <option>14:45</option>
                            <option>15:00</option>
                            <option>15:15</option>
                            <option>15:30</option>
                            <option>15:45</option>
                            <option>16:00</option>
                            <option>16:15</option>
                            <option>16:30</option>
                            <option>16:45</option>
                            <option>17:00</option>
                            <option>17:15</option>
                            <option>17:30</option>
                            <option>17:45</option>
                            <option>18:00</option>
                            <option>18:15</option>
                            <option>18:30</option>
                            <option>18:45</option>
                            <option>19:00</option>
                            <option>19:15</option>
                            <option>19:30</option>
                            <option>19:45</option>
                            <option>20:00</option>
                          </select>
                        </div>
                      </div>
                      <textarea class="span4" placeholder="Description" name="description" id="description"></textarea>
                  </div>
                </div>
                <div class="modal-footer">
                    <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
                    <button class="btn btn-warning" id="btnUpdateSession">Save</button>
                </div>
            </div>
            <div class="modal large hide fade" id="myDeleteModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h3 id="myModalLabel">Delete Confirmation</h3>
                </div>
                <div class="modal-body">
                    <p class="error-text">Are you sure you want to delete the user?</p>
                </div>
                <div class="modal-footer">
                    <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
                    <button class="btn btn-danger" data-dismiss="modal">Delete</button>
                </div>
            </div>
          </div>
        </div>
      </div>
    </div>
</body>
</html>